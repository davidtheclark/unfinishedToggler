function UnfinishedToggler(a){this.settings=$.extend({},this.defaults,a),this.init()}UnfinishedToggler.prototype={defaults:{root:"body",onClass:"uft-on",offClass:"uft-off",scattered:!1,triggerSelector:".uft-trigger",groupSelector:".uft-group",contentSelector:".uft-content",onlyOneOn:!0,allOff:!0,events:["click"],eventNamespace:"uft",onCallback:function(){},offCallback:function(){},transClass:"uft-trans",onTransDelay:40,offTransTime:0,transOverlap:!0},registerDefault:function(a){$.extend(this.defaults,a)},hooks:{init:[],enable:[],disable:[],trigger:[],turnOn:[],turnOff:[]},registerHook:function(a,b){this.hooks[a].push(b)},execHook:function(a,b){var c=this.hooks[a];b=b||[];for(var d=0,e=c.length;e>d;d++)c[d].apply(this,b)},namespaceEvent:function(a){return a=a||"",a+"."+this.settings.eventNamespace},isOn:function(a){return a.hasClass(this.settings.onClass)},getGroupById:function(a){return this.$items.filter('[data-uft-group="'+a+'"]')},getOnItems:function(){return this.$items.filter("."+this.settings.onClass)},getGroup:function(a){var b=this,c=b.settings;return"number"==typeof a?b.getGroupById(a):c.scattered?b.getGroupById($(a).data("uft-group")):$(a).closest(c.groupSelector)},debounceDone:function(){var a=this;setTimeout(function(){a.data.isDebouncing=!1},200)},optionalDelay:function(a,b){a?window.setTimeout(b,a):b()},init:function(){var a=this,b=a.settings;a.onCount=0,a.$root=$(b.root),a.$triggers=a.$root.find(b.triggerSelector),a.$items=b.scattered?a.$triggers.add(a.$root.find(b.contentSelector)):a.$root.find(b.groupSelector),a.data={isDebouncing:!1},a.nmEvents=$.map(b.events,function(b){return a.namespaceEvent(b)}).join(" "),a.enable(),b.allOff||a.getOnItems().length||a.$triggers.first().trigger(a.nmEvents.split(" ")[0]),a.execHook("init")},enable:function(){var a=this;a.$triggers.on(a.nmEvents,function(){a.data.isDebouncing||(a.data.isDebouncing=!0,a.triggerGroup.call(a,this))}),this.execHook("enable")},disable:function(){this.$triggers.off(this.namespaceEvent()),this.execHook("disable")},triggerGroup:function(a){var b=this,c=b.settings,d=b.getGroup(a),e=!b.isOn(d);e?b.turnOn(d):(c.allOff||!c.allOff&&b.onCount>1)&&b.turnOff(d),b.execHook("trigger",[d,e])},turnOn:function(a){function b(){a.removeClass(e.offClass).addClass(e.onClass),d.optionalDelay(e.onTransDelay,function(){a.addClass(e.transClass)}),e.onCallback({$group:a,action:"on"}),d.onCount++,d.debounceDone(),d.execHook("turnOn",[a])}var c,d=this,e=d.settings;e.onlyOneOn?(c=d.getOnItems(),e.transOverlap?(d.turnOff(c),b()):d.turnOff(c,b)):b()},turnOff:function(a,b){var c=this,d=c.settings,e=d.transClass+"-off";b=b||function(){},a.length?(a.removeClass(d.transClass).addClass(e),c.optionalDelay(d.offTransTime,function(){a.removeClass(d.onClass).removeClass(e).addClass(d.offClass),d.offCallback({$group:a,action:"off"}),c.onCount--,c.debounceDone(),b(),c.execHook("turnOff",[a])})):b()},turnAllOn:function(){if(this.settings.onlyOneOn)throw new Error("UnfinishedToggler will not turnAllOn with the setting {onlyOneOn: true}.");this.turnOn(this.$items)},turnAllOff:function(){if(!this.settings.allOff)throw new Error("UnfinishedToggler will not turnAllOff with the setting {allOff: true}.");this.turnOff(this.$items)}},UnfinishedToggler.prototype.registerDefault({freezeScroll:!1}),$.extend(UnfinishedToggler.prototype,{freezeScrollOn:function(){var a=this,b={overflow:"hidden"};if(a.hasScrollbar){var c=a.getScrollbarSize();c&&(b["margin-right"]=c)}$("html").css(b)},freezeScrollOff:function(){$("html").css({overflow:"","margin-right":""})},getScrollbarSize:function(){if(void 0===this.data.scrollbarSize){var a=document.createElement("div");a.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(a),this.data.scrollbarSize=a.offsetWidth-a.clientWidth,document.body.removeChild(a)}return this.data.scrollbarSize},hasScrollbar:function(){return document.body.scrollHeight>$(window).height()}}),UnfinishedToggler.prototype.registerHook("turnOn",function(){this.settings.freezeScroll&&this.freezeScrollOn()}),UnfinishedToggler.prototype.registerHook("turnOff",function(){this.settings.freezeScroll&&this.freezeScrollOff()}),UnfinishedToggler.prototype.registerDefault({innerFocus:!1}),UnfinishedToggler.prototype.innerFocus=function(a){var b=this,c=b.settings,d=$(a.target),e=c.scattered?d.closest(c.contentSelector):d,f=b.isOn(b.getGroup(e));f?b.debounceDone():b.triggerGroup(e)},UnfinishedToggler.prototype.registerHook("init",function(){var a=this,b=a.settings;b.innerFocus&&a.$root.find(b.innerFocus).on(a.namespaceEvent("focus"),function(b){a.data.isDebouncing||(a.data.isDebouncing=!0,a.innerFocus.call(a,b))})}),UnfinishedToggler.prototype.registerDefault({nextSelector:!1,prevSelector:!1,nextInterval:!1}),$.extend(UnfinishedToggler.prototype,{nextOrPrev:function(a){var b,c,d,e,f=this,g=f.settings,h="UnfinishedToggler cannot use next() and prev() ";if(!g.onlyOneOn)throw new Error(h+"with the setting {onlyOneOn: false}.");if(b=f.getOnItems().first().data("uft-group"),"undefined"==typeof b)throw new Error(h+"unless data-uft-group values are defined.");if("number"!=typeof b)throw new Error(h+"unless data-uft-group values are integers.");c=Math.min.apply(Math,f.groupIds),d=Math.max.apply(Math,f.groupIds),e="next"===a?d>=b+1?b+1:c:b-1>=c?b-1:d,f.triggerGroup(e)},next:function(){this.nextOrPrev("next")},prev:function(){this.nextOrPrev("prev")}}),UnfinishedToggler.prototype.registerHook("init",function(){var a=this;a.groupIds=[],a.groupIds=$.map(a.$items,function(b){var c=$(b).data("uft-group");return c&&-1===$.inArray(c,a.groupIds)?c:void 0})}),UnfinishedToggler.prototype.registerHook("enable",function(){var a=this,b=a.settings;b.nextSelector&&$(b.nextSelector).on(a.namespaceEvent("click"),function(){a.next.call(a,this)}),b.prevSelector&&$(b.prevSelector).on(a.namespaceEvent("click"),function(){a.prev.call(a,this)}),b.nextInterval&&(a.createInterval=function(){a.timeout=setTimeout(a.intervalFn,b.nextInterval)},a.intervalFn=function(){a.next.call(a,this)},a.resetInterval=function(){clearInterval(a.timeout),a.createInterval()},a.createInterval())}),UnfinishedToggler.prototype.registerHook("trigger",function(){this.settings.nextInterval&&this.resetInterval()}),UnfinishedToggler.prototype.registerHook("disable",function(){var a=this.settings;a.nextSelector&&$(a.nextSelector).off(this.namespaceEvent()),a.prevSelector&&$(a.prevSelector).off(this.namespaceEvent())}),UnfinishedToggler.prototype.registerDefault({outsideTurnsOff:!1}),UnfinishedToggler.prototype.outsideTurnsOff=function(a,b){function c(){i.on(h,function(a){a.stopPropagation()}),setTimeout(function(){$("html").on(h,e)},40)}function d(){$("html").off(f.namespaceEvent(""))}function e(b){i.is($(b.target))||(f.turnOff(a),d())}var f=this,g=f.settings,h=f.namespaceEvent("click")+" "+f.namespaceEvent("touchend"),i="string"==typeof g.outsideTurnsOff?$(g.outsideTurnsOff):a;b?c():d()},UnfinishedToggler.prototype.registerHook("trigger",function(a,b){this.settings.outsideTurnsOff&&this.outsideTurnsOff(a,b)});